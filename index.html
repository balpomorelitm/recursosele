<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Herramientas de ELE</title>
    <meta name="description" content="Colección de minijuegos interactivos para practicar español como lengua extranjera.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Darumadrop+One&family=Knewave&family=Montserrat:wght@400;700&family=Zain:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-actions">
                <div class="language-toggle">
                    <button class="lang-btn" type="button" aria-label="Cambiar a inglés">English</button>
                </div>
            </div>
            <h1 class="main-title">Mis Herramientas de ELE</h1>
            <p class="subtitle" data-i18n-key="subtitle">Una colección creciente de minijuegos para practicar español paso a paso.</p>
        </header>

        <section class="controls" aria-label="Controles de filtrado">
            <div class="filters" role="toolbar" aria-label="Filtros de recursos">
                <span class="filter-label" data-i18n-key="filterLabel">Filtrar por tipo</span>
                <div class="filter-buttons" role="group" aria-label="Tipos de recurso">
                    <button class="filter-btn active" type="button" data-filter="all" aria-pressed="true" data-i18n-key="filterAll">Todos</button>
                    <button class="filter-btn" type="button" data-filter="exercise" aria-pressed="false" data-i18n-key="filterExercises">Ejercicios</button>
                    <button class="filter-btn" type="button" data-filter="reading" aria-pressed="false" data-i18n-key="filterReadings">Lecturas</button>
                    <button class="filter-btn" type="button" data-filter="game" aria-pressed="false" data-i18n-key="filterGames">Juegos</button>
                </div>
            </div>
        </section>

        <main class="tools-grid grid-view">
            <article class="tool-card" data-category="exercise">
                <div class="tool-header">
                    <div>
                        <h3 class="tool-title" data-i18n-key="serTitle">Conjugador de "ser"</h3>
                        <div class="tool-meta">
                            <span data-i18n-key="serMeta1">Gramática interactiva</span>
                            <span data-i18n-key="serMeta2">Niveles A1 – A2</span>
                        </div>
                    </div>
                </div>
                <p class="tool-description" data-i18n-key="serDescription" data-i18n-mode="html">Practica las formas del verbo <em>ser</em> en presente, pasado y futuro con pistas visuales y autoevaluación inmediata.</p>
                <div class="tool-tags">
                    <span class="tag subject" data-i18n-key="serTagSubject">Gramática</span>
                    <span class="tag level" data-i18n-key="serTagLevel">A1-A2</span>
                </div>
                <div class="tool-footer">
                    <a class="visit-btn" href="herramientas/conjugador-ser/Conjugaciónser2.html" data-i18n-key="serButton">Jugar ahora</a>
                    <p class="usage-count" data-i18n-key="serDuration">Duración aprox.: 10 minutos</p>
                </div>
            </article>

            <article class="tool-card" data-category="game">
                <div class="tool-header">
                    <div>
                        <h3 class="tool-title" data-i18n-key="nounsTitle">Clasificador de sustantivos</h3>
                        <div class="tool-meta">
                            <span data-i18n-key="nounsMeta1">Vocabulario temático</span>
                            <span data-i18n-key="nounsMeta2">Niveles A1 – A2</span>
                        </div>
                    </div>
                </div>
                <p class="tool-description" data-i18n-key="nounsDescription">Arrastra y suelta cada palabra en la categoría correcta para repasar géneros, temas y traducciones básicas.</p>
                <div class="tool-tags">
                    <span class="tag subject" data-i18n-key="nounsTagSubject">Vocabulario</span>
                    <span class="tag level" data-i18n-key="nounsTagLevel">A1-A2</span>
                </div>
                <div class="tool-footer">
                    <a class="visit-btn" href="herramientas/clasificador-sustantivos/nouns.html" data-i18n-key="nounsButton">Descubrir</a>
                    <p class="usage-count" data-i18n-key="nounsDuration">Ideal para repasar en clase o en casa</p>
                </div>
            </article>
        </main>

        <div class="empty-state" data-i18n-key="noResults" hidden>
            No hay recursos disponibles para este filtro todavía. ¡Pronto habrá más!
        </div>

        <footer class="footer">
            <p class="footer-text" data-i18n-key="footer">Creado con ❤️ para mis estudiantes de español.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const translations = {
                es: {
                    mainTitle: 'Mis Herramientas de ELE',
                    subtitle: 'Una colección creciente de minijuegos para practicar español paso a paso.',
                    filterLabel: 'Filtrar por tipo',
                    filterAll: 'Todos',
                    filterExercises: 'Ejercicios',
                    filterReadings: 'Lecturas',
                    filterGames: 'Juegos',
                    noResults: 'No hay recursos disponibles para este filtro todavía. ¡Pronto habrá más!',
                    serTitle: 'Conjugador de "ser"',
                    serMeta1: 'Gramática interactiva',
                    serMeta2: 'Niveles A1 – A2',
                    serDescription: 'Practica las formas del verbo <em>ser</em> en presente, pasado y futuro con pistas visuales y autoevaluación inmediata.',
                    serTagSubject: 'Gramática',
                    serTagLevel: 'A1-A2',
                    serButton: 'Jugar ahora',
                    serDuration: 'Duración aprox.: 10 minutos',
                    nounsTitle: 'Clasificador de sustantivos',
                    nounsMeta1: 'Vocabulario temático',
                    nounsMeta2: 'Niveles A1 – A2',
                    nounsDescription: 'Arrastra y suelta cada palabra en la categoría correcta para repasar géneros, temas y traducciones básicas.',
                    nounsTagSubject: 'Vocabulario',
                    nounsTagLevel: 'A1-A2',
                    nounsButton: 'Descubrir',
                    nounsDuration: 'Ideal para repasar en clase o en casa',
                    footer: 'Creado con ❤️ para mis estudiantes de español.',
                    languageButton: 'English',
                    languageButtonAria: 'Cambiar a inglés'
                },
                en: {
                    mainTitle: 'My ELE Toolkit',
                    subtitle: 'A growing collection of mini games to practice Spanish step by step.',
                    filterLabel: 'Filter by type',
                    filterAll: 'All',
                    filterExercises: 'Exercises',
                    filterReadings: 'Readings',
                    filterGames: 'Games',
                    noResults: 'No resources match this filter yet. More activities are coming soon!',
                    serTitle: '"Ser" conjugator',
                    serMeta1: 'Interactive grammar',
                    serMeta2: 'Levels A1 – A2',
                    serDescription: 'Practice the verb <em>ser</em> in the present, past, and future with visual clues and instant feedback.',
                    serTagSubject: 'Grammar',
                    serTagLevel: 'A1-A2',
                    serButton: 'Play now',
                    serDuration: 'Approx. duration: 10 minutes',
                    nounsTitle: 'Noun classifier',
                    nounsMeta1: 'Thematic vocabulary',
                    nounsMeta2: 'Levels A1 – A2',
                    nounsDescription: 'Drag and drop each word into the correct category to review gender, themes, and basic translations.',
                    nounsTagSubject: 'Vocabulary',
                    nounsTagLevel: 'A1-A2',
                    nounsButton: 'Explore',
                    nounsDuration: 'Perfect for reviewing in class or at home',
                    footer: 'Created with ❤️ for my Spanish students.',
                    languageButton: 'Español',
                    languageButtonAria: 'Switch to Spanish'
                }
            };

            const state = {
                lang: 'es',
                filter: 'all'
            };

            const titleEl = document.querySelector('.main-title');
            const langToggle = document.querySelector('.lang-btn');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const toolCards = document.querySelectorAll('.tool-card');
            const emptyState = document.querySelector('.empty-state');
            const i18nElements = document.querySelectorAll('[data-i18n-key]');

            const renderTitle = (text) => {
                if (!titleEl) return;
                titleEl.innerHTML = '';
                titleEl.setAttribute('aria-label', text);

                const words = text.split(' ');
                words.forEach((word, wordIndex) => {
                    const wordSpan = document.createElement('span');
                    wordSpan.className = 'title-word';

                    Array.from(word).forEach((char) => {
                        const letterSpan = document.createElement('span');
                        letterSpan.className = 'title-letter';
                        letterSpan.textContent = char;
                        wordSpan.appendChild(letterSpan);
                    });

                    titleEl.appendChild(wordSpan);

                    if (wordIndex < words.length - 1) {
                        const spaceSpan = document.createElement('span');
                        spaceSpan.className = 'title-letter space';
                        spaceSpan.setAttribute('aria-hidden', 'true');
                        spaceSpan.textContent = ' ';
                        titleEl.appendChild(spaceSpan);
                    }
                });
            };

            const applyTranslations = () => {
                const copy = translations[state.lang];
                if (!copy) return;

                renderTitle(copy.mainTitle);

                i18nElements.forEach((el) => {
                    const key = el.dataset.i18nKey;
                    if (!key || !copy[key]) {
                        return;
                    }

                    if (key === 'mainTitle') {
                        return;
                    }

                    const mode = el.dataset.i18nMode || 'text';
                    if (mode === 'html') {
                        el.innerHTML = copy[key];
                    } else {
                        el.textContent = copy[key];
                    }
                });

                if (langToggle) {
                    langToggle.textContent = copy.languageButton;
                    langToggle.setAttribute('aria-label', copy.languageButtonAria);
                }

                if (emptyState && copy.noResults) {
                    emptyState.innerHTML = copy.noResults;
                }

                document.documentElement.lang = state.lang;
                document.documentElement.dataset.lang = state.lang;
            };

            const applyFilter = () => {
                let visibleCount = 0;

                toolCards.forEach((card) => {
                    const categories = (card.dataset.category || '').split(/\s+/).filter(Boolean);
                    const matches = state.filter === 'all' || categories.includes(state.filter);

                    card.classList.toggle('is-hidden', !matches);

                    if (matches) {
                        visibleCount += 1;
                    }
                });

                if (emptyState) {
                    if (visibleCount === 0) {
                        emptyState.hidden = false;
                    } else {
                        emptyState.hidden = true;
                    }
                }
            };

            filterButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    state.filter = button.dataset.filter || 'all';

                    filterButtons.forEach((btn) => {
                        const isActive = btn === button;
                        btn.classList.toggle('active', isActive);
                        btn.setAttribute('aria-pressed', String(isActive));
                    });

                    applyFilter();
                });
            });

            if (langToggle) {
                langToggle.addEventListener('click', () => {
                    state.lang = state.lang === 'es' ? 'en' : 'es';
                    applyTranslations();
                });
            }

            applyTranslations();
            applyFilter();
        });
    </script>
</body>
</html>

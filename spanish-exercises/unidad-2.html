<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unidad 2 · Ejercicios de Español</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="unit-layout unit-2">
    <header class="unit-header">
      <div class="unit-header__info">
        <h1>Unidad 2 · Quiero aprender español</h1>
        <p class="unit-header__subtitle">23 ejercicios interactivos para practicar la gramática y el vocabulario de la unidad.</p>
      </div>
      <div class="unit-header__actions">
        <a class="unit-home-link" href="index.html">Volver al menú</a>
        <button class="index-toggle" type="button" aria-expanded="false" aria-controls="exercise-index">Índice</button>
      </div>
    </header>

    <nav class="exercise-tabs" aria-label="Lista de ejercicios">
      <ul>
        <li><button type="button" data-target="22" class="tab-button active">22</button></li>
        <li><button type="button" data-target="23" class="tab-button">23</button></li>
        <li><button type="button" data-target="24" class="tab-button">24</button></li>
        <li><button type="button" data-target="25" class="tab-button">25</button></li>
        <li><button type="button" data-target="26" class="tab-button">26</button></li>
        <li><button type="button" data-target="27" class="tab-button">27</button></li>
        <li><button type="button" data-target="28" class="tab-button">28</button></li>
        <li><button type="button" data-target="29" class="tab-button">29</button></li>
        <li><button type="button" data-target="30" class="tab-button">30</button></li>
        <li><button type="button" data-target="31" class="tab-button">31</button></li>
        <li><button type="button" data-target="32" class="tab-button">32</button></li>
        <li><button type="button" data-target="33" class="tab-button">33</button></li>
        <li><button type="button" data-target="34" class="tab-button">34</button></li>
        <li><button type="button" data-target="35" class="tab-button">35</button></li>
        <li><button type="button" data-target="36" class="tab-button">36</button></li>
        <li><button type="button" data-target="37" class="tab-button">37</button></li>
        <li><button type="button" data-target="38" class="tab-button">38</button></li>
        <li><button type="button" data-target="39" class="tab-button">39</button></li>
        <li><button type="button" data-target="40" class="tab-button">40</button></li>
        <li><button type="button" data-target="41" class="tab-button">41</button></li>
        <li><button type="button" data-target="42" class="tab-button">42</button></li>
        <li><button type="button" data-target="43" class="tab-button">43</button></li>
        <li><button type="button" data-target="44" class="tab-button">44</button></li>
      </ul>
    </nav>

    <aside class="exercise-index" id="exercise-index" aria-hidden="true">
      <div class="exercise-index__header">
        <h2>Ir a un ejercicio</h2>
        <button class="index-close" type="button" aria-label="Cerrar índice">×</button>
      </div>
      <ol class="exercise-index__list">
        <li><button type="button" data-target="22">Ej. 22</button></li>
        <li><button type="button" data-target="23">Ej. 23</button></li>
        <li><button type="button" data-target="24">Ej. 24</button></li>
        <li><button type="button" data-target="25">Ej. 25</button></li>
        <li><button type="button" data-target="26">Ej. 26</button></li>
        <li><button type="button" data-target="27">Ej. 27</button></li>
        <li><button type="button" data-target="28">Ej. 28</button></li>
        <li><button type="button" data-target="29">Ej. 29</button></li>
        <li><button type="button" data-target="30">Ej. 30</button></li>
        <li><button type="button" data-target="31">Ej. 31</button></li>
        <li><button type="button" data-target="32">Ej. 32</button></li>
        <li><button type="button" data-target="33">Ej. 33</button></li>
        <li><button type="button" data-target="34">Ej. 34</button></li>
        <li><button type="button" data-target="35">Ej. 35</button></li>
        <li><button type="button" data-target="36">Ej. 36</button></li>
        <li><button type="button" data-target="37">Ej. 37</button></li>
        <li><button type="button" data-target="38">Ej. 38</button></li>
        <li><button type="button" data-target="39">Ej. 39</button></li>
        <li><button type="button" data-target="40">Ej. 40</button></li>
        <li><button type="button" data-target="41">Ej. 41</button></li>
        <li><button type="button" data-target="42">Ej. 42</button></li>
        <li><button type="button" data-target="43">Ej. 43</button></li>
        <li><button type="button" data-target="44">Ej. 44</button></li>
      </ol>
    </aside>

    <main class="unit-content">
      <div class="exercise-carousel" data-active="22">
        <button class="carousel-control prev" type="button" aria-label="Ejercicio anterior">&#8592;</button>
        <div class="exercise-track">
          
          <article class="exercise-card" data-exercise="22"></article>
          <article class="exercise-card" data-exercise="23"></article>
          <article class="exercise-card" data-exercise="24"></article>
          <article class="exercise-card" data-exercise="25"></article>
          <article class="exercise-card" data-exercise="26"></article>
          <article class="exercise-card" data-exercise="27"></article>
          <article class="exercise-card" data-exercise="28"></article>
          <article class="exercise-card" data-exercise="29"></article>
          <article class="exercise-card" data-exercise="30"></article>
          <article class="exercise-card" data-exercise="31"></article>
          <article class="exercise-card" data-exercise="32"></article>
          <article class="exercise-card" data-exercise="33"></article>
          <article class="exercise-card" data-exercise="34"></article>
          <article class="exercise-card" data-exercise="35"></article>
          <article class="exercise-card" data-exercise="36"></article>
          <article class="exercise-card" data-exercise="37"></article>
          <article class="exercise-card" data-exercise="38"></article>
          <article class="exercise-card" data-exercise="39"></article>
          <article class="exercise-card" data-exercise="40"></article>
          <article class="exercise-card" data-exercise="41"></article>
          <article class="exercise-card" data-exercise="42"></article>
          <article class="exercise-card" data-exercise="43"></article>
          <article class="exercise-card" data-exercise="44"></article>

        </div>
        <button class="carousel-control next" type="button" aria-label="Ejercicio siguiente">&#8594;</button>
      </div>
    </main>
  </div>
  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
        const exerciseCards = document.querySelectorAll('.exercise-card');
        const cardMap = {
            '22': 'page-17.html #ex22', '23': 'page-18.html #ex23',
            '24': 'page-19.html #ex24', '25': 'page-19.html #ex25',
            '26': 'page-20.html #ex26', '27': 'page-20.html #ex27',
            '28': 'page-21.html #ex28', '29': 'page-21.html #ex29',
            '30': 'page-22.html #ex30', '31': 'page-22.html #ex31',
            '32': 'page-22.html #ex32', '33': 'page-23.html #ex33',
            '34': 'page-23.html #ex34', '35': 'page-24.html #ex35',
            '36': 'page-24.html #ex36', '37': 'page-25.html #ex37',
            '38': 'page-25.html #ex38', '39': 'page-25.html #ex39',
            '40': 'page-26.html #ex40', '41': 'page-26.html #ex41',
            '42': 'page-26.html #ex42', '43': 'page-27.html #ex43',
            '44': 'page-27.html #ex44'
        };

        exerciseCards.forEach(card => {
            const exerciseNum = card.dataset.exercise;
            if (cardMap[exerciseNum]) {
                const [url, selector] = cardMap[exerciseNum].split(' ');
                fetch(url)
                    .then(response => response.text())
                    .then(html => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        const content = doc.querySelector(selector);
                        if (content) {
                            card.innerHTML = `<header class="exercise-card__header"><p class="exercise-card__tag">Ejercicio ${exerciseNum}</p></header>`;
                            
                            let currentElement = content.previousElementSibling;
                            const elementsToPrepend = [];
                            while (currentElement && (currentElement.classList.contains('explanation-box') || currentElement.tagName === 'H1')) {
                                elementsToPrepend.unshift(currentElement.cloneNode(true));
                                currentElement = currentElement.previousElementSibling;
                            }
                            elementsToPrepend.forEach(el => card.prepend(el));
                            
                            card.appendChild(content);
                        }
                    })
                    .catch(err => console.error(`Failed to load exercise ${exerciseNum}:`, err));
            }
        });
        
        if (window.initUnitNavigation) {
            initUnitNavigation();
        }
    });
  </script>
</body>
</html>
